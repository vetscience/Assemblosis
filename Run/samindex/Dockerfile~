FROM ubuntu:16.04
RUN apt-get update && apt-get install -y wget bzip2 git
WORKDIR /root
RUN wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
RUN echo -e "\nyes\n" | bash Miniconda3-latest-Linux-x86_64.sh
ENV PATH=/root/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
RUN conda update -n base conda
RUN conda config --add channels defaults
RUN conda config --add channels conda-forge
RUN conda config --add channels bioconda
RUN conda install samtools==1.6
WORKDIR /root
RUN git clone -b 'v1.0.4-beta' --single-branch --depth 1 https://github.com/vetscience/Assemblosis
RUN cp Assemblosis/Run/samindex/samIndex.sh .
RUN chmod uog+x /root && chmod uog+rwx samIndex.sh
ENTRYPOINT ["/root/samIndex.sh"]
